<div>
  <h2
    class="page-heading"
    style="
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin: 0 0 2rem 5rem;
      font-size: 45px;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
      font-family: 'News Reader', serif;
    "
  >
    <span style="margin-right: 50%">Close Contacts</span>

    <div class="d-flex justify-content-end">
      <button
        class="btn btn-info btn-no-color me-2 refresh-btn"
        (click)="load()"
        [disabled]="isLoading"
        style="transition: all 0.3s ease; font-size: 18px"
      >
        <fa-icon class="spin-icon" [spin]="isSpinning" icon="sync" style="transition: all 0.3s ease; color: black"></fa-icon>
        <span style="color: black">Refresh list</span>
      </button>
    </div>
    <div class="btn">
      <select [(ngModel)]="selectedFontSize">
        <option *ngFor="let size of fontSizes" [value]="size">{{ size }}px</option>
      </select>
    </div>
  </h2>

  <hr />

  <jhi-alert-error></jhi-alert-error>

  <div class="row" style="margin: 1% 3.5% 1.2%">
    <div class="no-container" id="no-result" *ngIf="contacts?.length == 0">
      <span> No Contacts found</span>
    </div>

    <div class="div-container" *ngIf="contacts?.length != 0">
      <table class="table2 table-container">
        <tbody>
          <tr *ngFor="let contacts of contacts; trackBy: trackId" data-cy="entityTable" class="table2tr">
            <td style="border-bottom-left-radius: 15px; border-top-left-radius: 15px; width: 150px" class="table2td">
              <!-- Set minimum width for the first column -->
              <a
                style="margin-left: 20px; margin-right: 17px"
                *ngIf="contacts.image"
                (click)="openFile(contacts.image, contacts.imageContentType)"
              >
                <img
                  [src]="'data:' + contacts.imageContentType + ';base64,' + contacts.image"
                  style="min-height: 110px; min-width: 110px"
                  alt="contacts image"
                  class="trusted-contact-photo"
                />
              </a>
              <a
                style="margin-left: 20px; margin-right: 17px"
                *ngIf="!contacts.image"
                (click)="openFile('/content/images/default-contact-img.png', 'image/png')"
              >
                <img
                  src="/content/images/default-contact-img.png"
                  style="min-height: 110px; min-width: 110px"
                  alt="default image"
                  class="trusted-contact-photo"
                />
              </a>
            </td>
            <td
              [style.font-size.px]="selectedFontSize"
              style="text-align: left; font-family: 'Georgia', serif; text-transform: uppercase; width: 23rem"
              class="table2td"
            >
              <!-- Set minimum width and center align for the second column -->
              {{ contacts.contactName }}
            </td>
            <td
              [style.font-size.px]="selectedFontSize"
              style="
                width: 13rem;
                padding-left: 7px;
                text-align: left;
                font-family: 'Times New Roman', Times, serif;
                text-transform: uppercase;
              "
              class="table2td"
            >
              <!-- Set minimum width and center align for the third column -->
              {{ contacts.contactPhone }}
            </td>
            <td style="width: 10rem" class="table2td">
              <!-- Set minimum width and center align for the fourth column -->
              {{ contacts.contactRelation }}
            </td>
            <td
              class="table2td"
              style="padding-left: 8px; padding-right: 1rem; border-top-right-radius: 15px; border-bottom-right-radius: 15px"
            >
              <!-- Set minimum width and right align for the fifth column -->
              <div class="btn-group">
                <button
                  type="button"
                  (click)="openEditDialog(contacts)"
                  class="btn btn-primary btn-sm ms-2"
                  data-cy="entityEditButton"
                  style="height: 50px; width: 50px; border-radius: 10px"
                >
                  <fa-icon icon="pencil-alt"></fa-icon>
                </button>

                <button
                  type="submit"
                  (click)="delete(contacts)"
                  class="btn btn-danger btn-sm ms-2"
                  data-cy="entityDeleteButton"
                  style="height: 50px; width: 50px; border-radius: 10px"
                >
                  <fa-icon icon="times"></fa-icon>
                </button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="add-but-container">
      <button class="add-but" style="transition: all 0.3s ease" (click)="openDialog()">
        <fa-icon icon="plus"></fa-icon>
        <span>Add New</span>
      </button>
      <div id="myDialog" class="dialog" *ngIf="showDialog">
        <div>
          <form name="editForm" role="form" novalidate (ngSubmit)="save()" [formGroup]="editForm">
            <h5 style="text-align: center">Enter Details</h5>
            <div>
              <div style="text-align: left">
                <label class="form-label" for="field_image">Image:</label>
                <div class="row">
                  <div class="col-md-6" style="text-align: center">
                    <div *ngIf="editForm.get('image')!.value" class="form-text text-danger clearfix" style="margin-bottom: 4px">
                      <img
                        [src]="'data:' + editForm.get('imageContentType')!.value + ';base64,' + editForm.get('image')!.value"
                        style="height: 85px; width: 85px"
                        *ngIf="editForm.get('image')!.value"
                        alt="contacts image"
                        class="trusted-contact-photo"
                      />
                    </div>
                  </div>
                  <div class="col-md-4" style="padding-top: 10px">
                    <button
                      type="button"
                      (click)="clearInputImage('image', 'imageContentType', 'file_image')"
                      class="btn btn-secondary btn-xs pull-end"
                      style="margin-top: 1rem; margin-left: 2rem"
                      *ngIf="editForm.get('image')!.value"
                    >
                      <fa-icon icon="times"></fa-icon>
                    </button>
                  </div>
                  <input type="file" id="file_image" data-cy="image" (change)="setFileData($event, 'image', true)" accept="image/*" />
                  <input type="hidden" class="form-control" name="image" id="field_image" data-cy="image" formControlName="image" />
                  <input
                    type="hidden"
                    class="form-control"
                    name="imageContentType"
                    id="field_imageContentType"
                    formControlName="imageContentType"
                  />
                </div>
              </div>

              <div style="margin-top: 1rem" class="row">
                <div style="margin-left: 2px; margin-top: 4px" class="col-2">
                  <label class="form-label" for="field_contactName">Name:</label>
                </div>
                <div style="width: 80%">
                  <input
                    type="text"
                    class="form-control"
                    name="contactName"
                    id="field_contactName"
                    data-cy="contactName"
                    formControlName="contactName"
                  />
                </div>
              </div>

              <div style="margin-top: 1rem" class="row">
                <div style="margin-left: 2px; margin-top: 4px" class="col-2">
                  <label class="form-label" for="field_contactPhone">Phone:</label>
                </div>
                <div style="width: 80%">
                  <input
                    type="text"
                    class="form-control"
                    name="contactPhone"
                    id="field_contactPhone"
                    data-cy="contactPhone"
                    formControlName="contactPhone"
                    inputmode="numeric"
                    pattern="[0-9+ ]*"
                  />
                </div>
              </div>

              <div style="margin-top: 1rem" class="row">
                <div style="margin-left: 2px; margin-top: 4px; width: 70px">
                  <label class="form-label" for="field_contactRelation">Relation:</label>
                </div>
                <div style="width: 200px">
                  <select
                    class="form-control"
                    name="contactRelation"
                    formControlName="contactRelation"
                    id="field_contactRelation"
                    data-cy="contactRelation"
                    style="text-align: center"
                  >
                    <option *ngFor="let relationshipType of relationshipTypeValues" [value]="relationshipType">
                      {{ relationshipType }}
                    </option>
                  </select>
                </div>
              </div>

              <div style="margin-top: 1rem" class="row">
                <div style="margin-left: 2px; margin-top: 4px; width: 70px">
                  <label class="form-label" for="field_contactRelation">UserID:</label>
                </div>
                <div style="width: 200px">
                  <select
                    class="form-control"
                    name="users"
                    formControlName="users"
                    id="field_users"
                    data-cy="user"
                    style="text-align: center"
                  >
                    <option *ngFor="let user of users" [value]="user.id">
                      {{ user.id }}
                    </option>
                  </select>
                </div>
              </div>
              <div style="font-size: 10px; text-align: left">
                <label>select the userID of your contact to enable chat feature</label>
              </div>
            </div>

            <div class="row" style="margin-top: 1rem; margin-left: 1rem">
              <button
                type="button"
                id="cancel-save"
                data-cy="entityCreateCancelButton"
                class="btn btn-secondary"
                (click)="closeDialog()"
                style="width: 40%; margin-right: 38px"
              >
                <fa-icon icon="ban"></fa-icon>&nbsp;<span>Cancel</span>
              </button>
              <button
                type="submit"
                id="save-entity"
                data-cy="entityCreateSaveButton"
                [disabled]="editForm.invalid || isSaving"
                class="btn btn-primary"
                style="width: 40%"
              >
                <fa-icon icon="save"></fa-icon>&nbsp;<span>Save</span>
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  /* CSS to style the table */
  .add-but-container {
    width: 30%;
    text-align: center;
    position: relative;
    padding-left: 2%;
  }

  .add-but {
    border-radius: 10px;
    border: none;
    background-color: white;
    font-size: 18px;
    font-family: 'News Reader', serif;
  }

  .dialog {
    position: absolute;
    max-height: 94%;
    max-width: 87%;
    background-color: #f5f5dc;
    box-shadow: 0 5px 10px rgba(0, 0, 0, 0.3);
    padding: 10px; /* Adjust padding as needed */
    border-radius: 25px;
    z-index: 10; /* Ensure the dialog is on top of other elements */
    overflow-y: scroll; /* Enable vertical scrolling  */
    scrollbar-width: none; /* Standard way to hide the scrollbar */
    scroll-behavior: smooth;
    margin-left: 3%;
  }

  .no-container {
    display: flex;
    justify-content: center;
    align-items: center;
    border-radius: 20px;
    background-color: #f5f5dc; /* Beige background */
    height: 90px;
    width: 70%;
    margin: 1rem 0 394px 0;
    text-align: center;
    font-size: 20px;
    font-family: 'Georgia', serif;
    color: #333; /* Dark font color */
  }

  .div-container {
    border-radius: 20px;
    background-image: linear-gradient(135deg, #a1adf5 0%, #cad0f6 100%);
    height: 450px; /* Set the desired height */
    width: 70%;
    overflow-y: scroll; /* Enable vertical scrolling  */
    scrollbar-width: none; /* Standard way to hide the scrollbar */
    scroll-behavior: smooth;
  }

  .table-container {
    padding: 1rem; /* Adjust the padding value for desired space */
  }

  .table2 {
    border-collapse: separate;
    border-spacing: 0 1rem;
  }

  .table2tr {
    background-color: #f5f5dc;
    height: 7rem;
  }

  .table2td {
    padding: 17px 0;
    text-align: center; /* Example of moving styles from inline to the class */
  }

  hr {
    width: 93%; /* Adjust the width to your desired length */
    margin: 0 auto; /* Center the <hr> horizontally */
  }

  .page-heading {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
  }

  .refresh-btn {
    transition: all 0.3s ease;
  }

  .refresh-btn:hover {
    background-color: #007bff;
    color: #fff;
  }

  .refresh-btn:hover span {
    color: #5095c7; /* Change the color to the desired color when hovering over the text */
  }

  .refresh-btn:hover .spin-icon {
    /* Apply the original color to the icon when hovering */
    color: black;
  }

  .spin-icon {
    animation: spin 1s infinite linear;
  }

  @keyframes spin {
    0% {
      transform: rotate(0deg);
    }
    100% {
      transform: rotate(360deg);
    }
  }

  @keyframes fadeIn {
    0% {
      opacity: 0;
    }
    100% {
      opacity: 1;
    }
  }

  .trusted-contact-photo {
    border-radius: 50%;
    object-fit: cover;
    width: 100px;
    height: 100px;
    transition: transform 0.3s ease;
    box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2); /* Add a subtle shadow */
  }

  .trusted-contact-photo:hover {
    transform: scale(1.1);
    cursor: pointer;
  }

  .btn-no-color {
    background-color: transparent !important;
    border-color: transparent !important;
  }

  .btn-no-color:hover {
    color: #5095c7 !important;
  }
</style>
